<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ø§Ø®ØªØ¨Ø± Ù‚Ø¯Ø±Ø§ØªÙƒ Ø§Ù„Ø±ÙˆØ­Ø§Ù†ÙŠØ©</title>
  <style>
    body {
      font-family: 'Cairo', sans-serif;
      background-color: #000;
      color: #fff;
      text-align: center;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      direction: rtl; /* Set RTL direction for overall page */
    }
    .hidden { display: none; }
    .fade { animation: fadeIn 1.5s ease-in-out; }
    @keyframes fadeIn {
      from { opacity: 0; } to { opacity: 1; }
    }
    .container {
      padding: 20px;
    }
    .button {
      background-color: #8a2be2; /* Purple from your latest design */
      color: white;
      border: none;
      padding: 10px 20px;
      margin: 10px;
      font-size: 18px;
      border-radius: 10px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .button:hover {
      background-color: #5e1ca3; /* Darker purple on hover */
    }
    .progress-container {
      width: 80%;
      margin: 20px auto;
      height: 20px;
      background-color: #333;
      border-radius: 10px;
      overflow: hidden;
      direction: ltr; /* Override RTL for progress bar fill direction */
    }
    .progress-bar {
      height: 100%;
      background-color: #8a2be2; /* Purple fill */
      width: 0%;
      transition: width 0.5s;
    }
    .whatsapp-fixed {
      position: fixed;
      bottom: 20px;
      right: 20px; /* Kept right as in your latest code */
      background-color: #25d366;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
      text-decoration: none; /* Ensure no underline */
      cursor: pointer; /* Add cursor pointer for consistency with button */
    }
    .whatsapp-fixed img {
      width: 35px;
      height: 35px;
    }
    /* Style for the new logo button */
    #logo-button {
      background-color: rgba(255,255,255,0.08); /* Slightly transparent background */
      color: #8a2be2; /* Your chosen purple color */
      font-size: 28px; /* Increased font size for prominence */
      font-weight: bold;
      padding: 10px 20px;
      border-radius: 15px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin-bottom: 20px; /* Space it out from other elements */
      display: inline-block; /* Allows centering with text-align: center on parent */
    }
    #logo-button:hover {
        background-color: rgba(255,255,255,0.15); /* More visible on hover */
    }

    #lightning {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at center, rgba(255,255,255,0.2) 0%, transparent 70%), rgba(255,255,255,0.1);
      pointer-events: none;
      opacity: 0;
      z-index: 10;
      animation: flash 5s infinite;
    }
    @keyframes flash {
      0%, 97%, 100% { opacity: 0; }
      98% { opacity: 0.4; }
      99% { opacity: 0; }
    }
    
    .result-message {
      font-size: 1.2em;
      background-color: rgba(255,255,255,0.1);
      padding: 20px;
      border-radius: 16px;
      margin: 20px auto;
      max-width: 600px;
      white-space: pre-wrap;
      text-align: right;
      direction: rtl;
    }
    #questionText {
        text-align: right;
    }
    #choices {
        direction: rtl;
    }
  </style>
</head>
<body>
  <div id="lightning"></div>
  <audio id="bgMusic" loop>
    <source src="https://www.learningcontainer.com/wp-content/uploads/2020/02/Kalimba.mp3" type="audio/mpeg" />
  </audio>
  <audio id="endMusic">
    <source src="https://www.learningcontainer.com/wp-content/uploads/2020/02/Mr_Loop_-_Acoustic_Funk.mp3" type="audio/mpeg" />
  </audio>

  <div class="container fade" id="setup">
    <div id="logo-button" onclick="openSpiritualContact('logo')">Ø§Ø­ğŸ‘ï¸Ù…Ø¯</div>
    <h1>Ø§Ø®ØªØ¨Ø± Ù‚Ø¯Ø±Ø§ØªÙƒ Ø§Ù„Ø±ÙˆØ­Ø§Ù†ÙŠØ©</h1>
    <p>Ø§Ø®ØªØ± ÙˆØ¶Ø¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</p>
    <button class="button" onclick="selectMode('solo')">ÙØ±Ø¯ÙŠ</button>
    <button class="button" onclick="selectMode('group')">Ø¬Ù…Ø§Ø¹ÙŠ</button>
  </div>

  <div class="container hidden" id="testType">
    <h2>Ø§Ø®ØªØ± Ù†ÙˆØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h2>
    <button class="button" onclick="startTest('short')">Ø§Ø®ØªØ¨Ø§Ø± Ù‚ØµÙŠØ± (10 Ø£Ø³Ø¦Ù„Ø©)</button>
    <button class="button" onclick="startTest('deep')">Ø§Ø®ØªØ¨Ø§Ø± Ø¹Ù…ÙŠÙ‚ (28 Ø³Ø¤Ø§Ù„)</button>
  </div>

  <div class="container hidden" id="quiz">
    <div id="questionText"></div>
    <div id="choices">
      </div>
    <br>
    <button class="button" id="backButton" onclick="goBack()">Ø±Ø¬ÙˆØ¹</button>
    <div class="progress-container"><div class="progress-bar" id="progressBar"></div></div>
  </div>

  <div class="container hidden" id="result">
    <h2>Ù†ØªÙŠØ¬ØªÙƒ</h2>
    <div id="resultText" class="result-message"></div>
    <button class="button" onclick="restartTest()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
    <br>
    <button class="button" onclick="shareResult()">Ø´Ø§Ø±Ùƒ Ù†ØªÙŠØ¬ØªÙƒ</button>
  </div>

  <div class="whatsapp-fixed" onclick="openSpiritualContact('floating')">
    <img src="https://img.icons8.com/ios-filled/50/ffffff/whatsapp.png" alt="WhatsApp Icon" />
  </div>

  <script>
    const questionsData = {
      short: [
        { q: "Ù‡Ù„ ØªØ´Ø¹Ø± Ø£Ø­ÙŠØ§Ù†Ù‹Ø§ Ø¨Ø£Ø­Ø¯Ø§Ø« Ù‚Ø¨Ù„ Ø£Ù† ØªØ­Ø¯Ø«ØŸ", type: "vision" },
        { q: "Ù‡Ù„ ØªÙ†Ø¬Ø°Ø¨ Ù„Ù„Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙˆØ§Ù„Ù…Ù‡Ø¬ÙˆØ±Ø©ØŸ", type: "energy" },
        { q: "Ù‡Ù„ ØªØ±Ù‰ Ø±Ù…ÙˆØ²Ù‹Ø§ Ø£Ùˆ Ø£Ù„ÙˆØ§Ù†Ù‹Ø§ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ£Ù…Ù„ØŸ", type: "aura" },
        { q: "Ù‡Ù„ ØªØ´Ø¹Ø± Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù†Ø§Ø³ Ù…Ù† Ø¯ÙˆÙ† Ø£Ù† ÙŠØªÙƒÙ„Ù…ÙˆØ§ØŸ", type: "sensing" },
        { q: "Ù‡Ù„ ØªØ±Ø§ÙˆØ¯Ùƒ Ø£Ø­Ù„Ø§Ù… ØªØªØ­Ù‚Ù‚ Ù„Ø§Ø­Ù‚Ù‹Ø§ØŸ", type: "vision" },
        { q: "Ù‡Ù„ ØªØ´Ø¹Ø± Ø¨Ø§Ù„ØªØ¹Ø¨ Ø¹Ù†Ø¯ Ø§Ù„ØªÙˆØ§Ø¬Ø¯ ÙÙŠ Ø£Ù…Ø§ÙƒÙ† Ù…Ø²Ø¯Ø­Ù…Ø©ØŸ", type: "sensing" },
        { q: "Ù‡Ù„ ØªÙ†Ø¬Ø°Ø¨ Ù„ÙÙƒØ±Ø© Ø§Ù„Ø£Ø±ÙˆØ§Ø­ ÙˆØ§Ù„ÙƒØ§Ø¦Ù†Ø§Øª Ø§Ù„Ø®ÙÙŠØ©ØŸ", type: "energy" },
        { q: "Ù‡Ù„ ÙŠÙ„ÙØª Ø§Ù†ØªØ¨Ø§Ù‡Ùƒ ØªÙƒØ±Ø§Ø± Ø£Ø±Ù‚Ø§Ù… Ù…Ø¹ÙŠÙ†Ø© ÙÙŠ Ø­ÙŠØ§ØªÙƒØŸ", type: "intuition" },
        { q: "Ù‡Ù„ ØªØ´Ø¹Ø± Ø£Ù†Ùƒ Ù…Ø®ØªÙ„Ù Ù…Ù†Ø° Ø§Ù„Ø·ÙÙˆÙ„Ø©ØŸ", type: "identity" },
        { q: "Ù‡Ù„ ØªØ¬Ø¯ Ø±Ø§Ø­Ø© ØºØ±ÙŠØ¨Ø© ÙÙŠ Ø§Ù„Ø¹Ø²Ù„Ø© ÙˆØ§Ù„ØªØ£Ù…Ù„ØŸ", type: "aura" },
      ],
      deep: [
        { q: "Ù‡Ù„ ØªØ´Ø¹Ø± Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø£Ø´ÙŠØ§Ø¡ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø¨Ù…Ø¬Ø±Ø¯ Ù„Ù…Ø³Ù‡Ø§ØŸ", type: "sensing" },
        { q: "Ù‡Ù„ Ù„Ø¯ÙŠÙƒ ÙØ¶ÙˆÙ„ ØºØ±ÙŠØ¨ ØªØ¬Ø§Ù‡ Ø§Ù„Ù…ÙˆØª ÙˆÙ…Ø§ Ø¨Ø¹Ø¯Ù‡ØŸ", type: "energy" },
        { q: "Ù‡Ù„ ØªØ´Ø¹Ø± Ø£Ù† Ù„Ùƒ Ø§Ø±ØªØ¨Ø§Ø· Ø¨ÙƒØ§Ø¦Ù† ØºÙŠØ± Ù…Ø±Ø¦ÙŠ ÙŠØ­Ù…ÙŠÙƒØŸ", type: "vision" },
        { q: "Ù‡Ù„ ØªØ±Ù‰ Ø£Ø­ÙŠØ§Ù†Ù‹Ø§ ÙˆÙ…ÙŠØ¶ Ø£Ùˆ Ø¸Ù„ ÙŠÙ…Ø± Ø¨Ø¬Ø§Ù†Ø¨ÙƒØŸ", type: "vision" },
        { q: "Ù‡Ù„ ØªØµØ¯Ù‚ Ø£Ù†Ùƒ Ø¹Ø´Øª Ø­ÙŠØ§Ø© Ø³Ø§Ø¨Ù‚Ø©ØŸ", type: "karma" },
        { q: "Ù‡Ù„ ØªÙ„Ø§Ø­Ø¸ Ø£Ù† Ø§Ù„Ø­ÙŠÙˆØ§Ù†Ø§Øª ØªØ±ØªØ§Ø­ Ù„ÙˆØ¬ÙˆØ¯ÙƒØŸ", type: "aura" },
        { q: "Ù‡Ù„ ØªÙ‚Ø±Ø£ Ø£ÙÙƒØ§Ø± Ø§Ù„Ø¢Ø®Ø±ÙŠÙ† Ø¨Ø³Ù‡ÙˆÙ„Ø©ØŸ", type: "sensing" },
        { q: "Ù‡Ù„ ØªÙ†Ø¬Ø°Ø¨ Ù„Ù„ÙˆÙ† Ù…Ø¹ÙŠÙ† ÙˆØªØ­Ø³ Ø£Ù†Ù‡ ÙŠØ¹Ø¨Ø± Ø¹Ù†ÙƒØŸ", type: "colors" },
        { q: "Ù‡Ù„ ØªØ±Ù‰ Ø§Ù„Ø£Ø­Ù„Ø§Ù… Ø¨Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ø¶Ø­Ø© ÙˆØºØ±ÙŠØ¨Ø©ØŸ", type: "vision" },
        { q: "Ù‡Ù„ ØªØ³Ø§ÙØ± Ø¨Ø®ÙŠØ§Ù„Ùƒ Ù„Ù…ÙƒØ§Ù† ØºÙŠØ± ÙˆØ§Ù‚Ø¹ÙŠ ÙˆØªØ¹ÙˆØ¯ØŸ", type: "projection" },
        { q: "Ù‡Ù„ ØªØ´Ø¹Ø± Ø£Ù†Ùƒ Ù…Ù†Ø¬Ø°Ø¨ Ù„Ù„ØºØ§Ø¨Ø§Øª ÙˆØ§Ù„Ù…ÙŠØ§Ù‡ Ø£ÙƒØ«Ø± Ù…Ù† Ø§Ù„Ù…Ø¯Ù†ØŸ", type: "nature" },
        { q: "Ù‡Ù„ ØªÙØ¶Ù„ Ø§Ù„ÙˆØ­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„ØªØ¬Ù…Ø¹Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©ØŸ", type: "personality" },
        { q: "Ù‡Ù„ ØªØªØ­Ø³Ø³ Ù…Ù† Ø§Ù„Ø£ØµÙˆØ§Øª Ø£Ùˆ Ø§Ù„Ø±ÙˆØ§Ø¦Ø­ Ø£ÙƒØ«Ø± Ù…Ù† Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØŸ", type: "sensing" },
        { q: "Ù‡Ù„ ØªØ¹ØªÙ‚Ø¯ Ø£Ù† Ø±ÙˆØ­Ùƒ Ù‚ÙˆÙŠØ© Ø¨Ø´ÙƒÙ„ ØºÙŠØ± Ù…ÙÙ‡ÙˆÙ…ØŸ", type: "identity" },
        { q: "Ù‡Ù„ ØªØ´Ø¹Ø± Ø¨Ø±ØºØ¨Ø© ÙÙŠ Ø´ÙØ§Ø¡ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†ØŸ", type: "healing" },
        { q: "Ù‡Ù„ ØªØ±Ù‰ Ø£Ù„ÙˆØ§Ù† Ø­ÙˆÙ„ Ø§Ù„Ø£Ø´Ø®Ø§Øµ Ø£Ø­ÙŠØ§Ù†Ù‹Ø§ØŸ", type: "aura" },
        { q: "Ù‡Ù„ ØªØ¬Ø¯ Ø£Ù† Ù„Ø¯ÙŠÙƒ ØªØ£Ø«ÙŠØ± Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©ØŸ", type: "energy" },
        { q: "Ù‡Ù„ ÙŠÙ„ÙØª Ø§Ù†ØªØ¨Ø§Ù‡Ùƒ Ø§Ø³Ù… Ù…Ø¹ÙŠÙ† ÙŠØ¸Ù‡Ø± Ù…Ø±Ø§Ø±Ù‹Ø§ØŸ", type: "signs" },
        { q: "Ù‡Ù„ ØªØ¹Ø§Ù†ÙŠ Ù…Ù† Ø£Ø±Ù‚ Ù„ÙŠÙ„ÙŠ Ù…ØªÙƒØ±Ø± Ø¨Ù„Ø§ Ø³Ø¨Ø¨ØŸ", type: "energy" },
        { q: "Ù‡Ù„ ØªÙ…ÙŠÙ„ Ù„ØªØµØ¯ÙŠÙ‚ Ø§Ù„Ø£Ø­Ù„Ø§Ù… Ø£ÙƒØ«Ø± Ù…Ù† Ø§Ù„ÙˆØ§Ù‚Ø¹ Ø£Ø­ÙŠØ§Ù†Ù‹Ø§ØŸ", type: "intuition" },
        { q: "Ù‡Ù„ ØªÙ‡Ø±Ø¨ Ù…Ù† Ø§Ù„ÙˆØ§Ù‚Ø¹ Ø£Ø­ÙŠØ§Ù†Ù‹Ø§ Ø¨Ø®ÙŠØ§Ù„ÙƒØŸ", type: "projection" },
        { q: "Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø§Ù†Ø¬Ø°Ø§Ø¨ ØºÙŠØ± Ù…Ø¨Ø±Ø± Ù„Ø£Ø´Ø®Ø§Øµ Ù…Ø¹ÙŠÙ†ÙŠÙ†ØŸ", type: "soulmate" },
        { q: "Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø­Ø¯Ø³ Ù‚ÙˆÙŠ ÙŠØ¬Ø¹Ù„Ùƒ ØªØªÙˆÙ‚Ø¹ Ù†ÙˆØ§ÙŠØ§ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†ØŸ", type: "intuition" },
        { q: "Ù‡Ù„ ØªØ­Ø³ Ø£Ù†Ùƒ ØªØªÙ„Ù‚Ù‰ Ø±Ø³Ø§Ø¦Ù„ Ù…Ù† Ø§Ù„ÙƒÙˆÙ†ØŸ", type: "signs" },
        { q: "Ù‡Ù„ ØªØ´Ø¹Ø± Ø£Ù†Ùƒ Ø£Ù‚Ø±Ø¨ Ù„Ù„ÙŠÙ„ Ø£ÙƒØ«Ø± Ù…Ù† Ø§Ù„Ù†Ù‡Ø§Ø±ØŸ", type: "personality" },
        { q: "Ù‡Ù„ ØªÙØµØ§Ø¨ Ø¨Ù‚Ø´Ø¹Ø±ÙŠØ±Ø© Ø¨Ø¯ÙˆÙ† Ø³Ø¨Ø¨ØŸ", type: "energy" },
        { q: "Ù‡Ù„ ØªØ±ØªØ§Ø­ Ù„Ø£Ù…Ø§ÙƒÙ† Ù„Ù… ØªØ²ÙØ±Ù‡Ø§ Ù…Ù† Ù‚Ø¨Ù„ØŸ", type: "karma" },
        { q: "Ù‡Ù„ ØªØ´Ø¹Ø± Ø¨ÙˆØ¬ÙˆØ¯ Ø´ÙŠØ¡ ÙŠØ±Ø§ÙÙ‚Ùƒ Ø¯Ø§Ø¦Ù…Ù‹Ø§ØŸ", type: "vision" },
        { q: "Ù‡Ù„ ØªØ±Ù‰ Ø£Ù† Ø§Ù„Ù†Ø³Ø§Ø¡ Ø£ÙƒØ«Ø± Ø§ØªØµØ§Ù„Ø§Ù‹ Ø¨Ø§Ù„Ø±ÙˆØ­Ø§Ù†ÙŠØ§ØªØŸ", type: "gender" },
      ]
    };

    let mode = "solo";
    let testType = "short";
    let currentQuestion = 0;
    let answers = {};
    let questions = [];
    let questionsHistory = [];
    let finalResultMessage = "";
    const yourPhoneNumber = "201284246235";

    function playAudio(audio) {
        if (audio) {
            audio.currentTime = 0;
            audio.play().catch(e => console.error("Audio play failed:", e));
        }
    }

    const bgMusic = document.getElementById("bgMusic");
    const endMusic = document.getElementById("endMusic");
    const clickSound = new Audio("https://www.soundjay.com/button/sounds/button-16.mp3");

    const setupContainer = document.getElementById('setup');
    const testTypeContainer = document.getElementById('testType');
    const quizContainer = document.getElementById('quiz');
    const resultContainer = document.getElementById('result');

    function showContainer(container) {
        [setupContainer, testTypeContainer, quizContainer, resultContainer].forEach(c => {
            c.classList.add('hidden');
            c.classList.remove('fade');
        });
        container.classList.remove('hidden');
        container.classList.add('fade');
    }

    document.addEventListener('click', () => {
        if (bgMusic.paused) {
            playAudio(bgMusic);
        }
    }, { once: true });

    function selectMode(selectedMode) {
      playAudio(clickSound);
      mode = selectedMode;
      showContainer(testTypeContainer);
    }

    function startTest(type) {
      playAudio(clickSound);
      testType = type;
      questions = questionsData[type];
      currentQuestion = 0;
      answers = {};
      questionsHistory = [];
      showContainer(quizContainer);
      showQuestion();
    }

    function showQuestion() {
      const q = questions[currentQuestion];
      document.getElementById("questionText").textContent = q.q;
      const choicesDiv = document.getElementById("choices");
      choicesDiv.innerHTML = "";
      [
        { text: "Ù†Ø¹Ù… ØªÙ…Ø§Ù…Ø§Ù‹", value: 2 },
        { text: "Ø£Ø­ÙŠØ§Ù†Ù‹Ø§", value: 1 },
        { text: "Ù†Ø§Ø¯Ø±Ø§Ù‹", value: 0 }
      ].forEach(choice => {
        const btn = document.createElement("button");
        btn.textContent = choice.text;
        btn.className = "button fade";
        btn.onclick = () => answerQuestion(choice.value);
        choicesDiv.appendChild(btn);
      });
      updateProgressBar();
    }

    function answerQuestion(val) {
      playAudio(clickSound);
      const q = questions[currentQuestion];
      answers[q.type] = (answers[q.type] || 0) + val;
      questionsHistory.push({ question: q, value: val });
      currentQuestion++;
      if (currentQuestion < questions.length) showQuestion();
      else showResult();
    }

    function updateProgressBar() {
      const progress = (currentQuestion / questions.length) * 100;
      document.getElementById("progressBar").style.width = progress + "%";
    }

    function goBack() {
        playAudio(clickSound);
        if (currentQuestion > 0 && questionsHistory.length > 0) {
            currentQuestion--;
            const lastAnswerData = questionsHistory.pop();
            const type = lastAnswerData.question.type;
            const value = lastAnswerData.value;

            answers[type] -= value;

            showQuestion();
        } else if (currentQuestion === 0 && questionsHistory.length === 0) {
            showContainer(testTypeContainer);
            bgMusic.play();
        }
    }

    function showResult() {
      playAudio(endMusic);
      bgMusic.pause();
      showContainer(resultContainer);

      let totalScore = 0;
      let traitsAnalysis = "";

      for (const type in answers) {
        totalScore += answers[type];

        const typeQuestions = questions.filter(q => q.type === type);
        const maxScoreForType = typeQuestions.length * 2;
        let percentage = 0;
        if (maxScoreForType > 0) {
            percentage = Math.round((answers[type] / maxScoreForType) * 100);
        }
        traitsAnalysis += `${translateType(type)}: ${percentage}% (${answers[type]} Ù†Ù‚Ø·Ø©)\n`;
      }

      let overallMessage;
      const maxOverallScore = questions.length * 2;
      const overallPercentage = (totalScore / maxOverallScore) * 100;

      if (overallPercentage >= 70) {
        overallMessage = "âš¡ Ù„Ø¯ÙŠÙƒ Ù…ÙŠÙˆÙ„ Ø±ÙˆØ­Ø§Ù†ÙŠØ© Ù‚ÙˆÙŠØ© Ø¬Ø¯Ø§Ù‹!";
      } else if (overallPercentage >= 40) {
        overallMessage = "ğŸŒŸ Ø±ÙˆØ­Ø§Ù†ÙŠØ§ØªÙƒ ÙÙŠ ØªØ·ÙˆØ± Ù…Ù„Ø­ÙˆØ¸ØŒ Ø§Ø³ØªÙ…Ø±!";
      } else {
        overallMessage = "ğŸŒ™ Ø±ÙˆØ­Ø§Ù†ÙŠØ§ØªÙƒ ÙÙŠ Ø¨Ø¯Ø§ÙŠØªÙ‡Ø§ØŒ Ù„ÙƒÙ†Ù‡Ø§ Ù…ÙˆØ¬ÙˆØ¯Ø© ÙˆÙŠÙ…ÙƒÙ† ØªØ·ÙˆÙŠØ±Ù‡Ø§.";
      }

      finalResultMessage = `ğŸŒŒ ØªØ­Ù„ÙŠÙ„ Ù‚Ø¯Ø±Ø§ØªÙƒ:\n\n${traitsAnalysis}\n${overallMessage}\n\nÙ„Ùˆ Ø¹Ø§ÙˆØ² ØªØ·ÙˆØ± ÙˆØªØ²ÙˆØ¯ Ù‚Ø¯Ø±Ø§ØªÙƒØŒ ØªÙˆØ§ØµÙ„ Ù…Ø¹Ø§Ù†Ø§ ğŸ‘‡`;

      document.getElementById("resultText").textContent = finalResultMessage;
    }

    function translateType(type) {
        const translations = {
            vision: "Ø§Ù„Ø±Ø¤ÙŠØ© ÙˆØ§Ù„Ø¨ØµÙŠØ±Ø©",
            energy: "Ø§Ù„Ø¥Ø­Ø³Ø§Ø³ Ø¨Ø§Ù„Ø·Ø§Ù‚Ø©",
            aura: "Ø§Ù„Ù‡Ø§Ù„Ø© ÙˆØ§Ù„Ø°Ø¨Ø°Ø¨Ø§Øª",
            sensing: "Ø§Ù„Ø§Ø³ØªØ´Ø¹Ø§Ø± ÙˆØ§Ù„Ø­Ø¯Ø³",
            intuition: "Ø§Ù„Ø­Ø¯Ø³ Ø§Ù„Ù‚ÙˆÙŠ",
            identity: "ÙÙ‡Ù… Ø§Ù„Ø°Ø§Øª",
            karma: "Ø§Ù„ÙƒØ§Ø±Ù…Ø§ ÙˆØ§Ù„Ø£Ù‚Ø¯Ø§Ø±",
            colors: "Ù„ØºØ© Ø§Ù„Ø£Ù„ÙˆØ§Ù†",
            projection: "Ø§Ù„Ø¥Ø³Ù‚Ø§Ø· Ø§Ù„Ø£Ø«ÙŠØ±ÙŠ",
            nature: "Ø§Ù„ØªÙ†Ø§ØºÙ… Ù…Ø¹ Ø§Ù„Ø·Ø¨ÙŠØ¹Ø©",
            personality: "Ø§Ù„Ø³Ù…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ© Ø§Ù„Ø±ÙˆØ­Ø§Ù†ÙŠØ©",
            healing: "Ø§Ù„Ù‚Ø¯Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´ÙØ§Ø¡",
            signs: "Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø¥Ø´Ø§Ø±Ø§Øª Ø§Ù„ÙƒÙˆÙ†ÙŠØ©",
            soulmate: "ØªÙˆØ£Ù… Ø§Ù„Ø±ÙˆØ­ ÙˆØ§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ‚",
            gender: "Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„Ø£Ù†Ø«ÙˆÙŠØ©/Ø§Ù„Ø°ÙƒØ±ÙŠØ© Ø§Ù„Ø±ÙˆØ­Ø§Ù†ÙŠØ©"
        };
        return translations[type] || type;
    }

    function shareResult() {
      playAudio(clickSound);
      const shareText = encodeURIComponent(`Ù†ØªÙŠØ¬ØªÙŠ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù‚Ø¯Ø±Ø§Øª Ø§Ù„Ø±ÙˆØ­Ø§Ù†ÙŠØ©:\n${finalResultMessage}\n\nØ¬Ø±Ø¨ Ø£Ù†Øª ÙƒÙ…Ø§Ù† ÙˆØ§ÙƒØªØ´Ù Ù‚Ø¯Ø±Ø§ØªÙƒ!`);
      // Use wa.me for general sharing
      window.open(`https://wa.me/?text=${shareText}`, '_blank');
    }

    // Updated function for spiritual contact (used by both logo button and floating WhatsApp button)
    function openSpiritualContact(buttonType) {
        playAudio(clickSound);
        let contactMessage = "";

        // Customize message based on which button was clicked, if needed
        if (buttonType === 'logo') {
            contactMessage = encodeURIComponent(
                `Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø¹Ø§Ù„Ù… Ø§Ù„Ø±ÙˆØ­Ø§Ù†ÙŠØ§Øª Ù…Ø¹ Ø£Ø­ğŸ‘ï¸Ù…Ø¯!\n\n` +
                `Ù„Ùˆ ÙƒÙ†Øª ØªØ¨Ø­Ø« Ø¹Ù†:\n` +
                `- ØªÙ‚ÙˆÙŠØ© Ù‚Ø¯Ø±Ø§ØªÙƒ Ø§Ù„Ø±ÙˆØ­Ø§Ù†ÙŠØ©\n` +
                `- ÙÙ‡Ù… Ø£Ø¹Ù…Ù‚ Ù„Ø°Ø§ØªÙƒ ÙˆØ·Ø§Ù‚ØªÙƒ\n` +
                `- Ø¥Ø¬Ø§Ø¨Ø§Øª Ù„Ø£Ø³Ø¦Ù„ØªÙƒ Ø§Ù„Ø±ÙˆØ­ÙŠØ©\n` +
                `ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙŠ Ø§Ù„Ø¢Ù† ÙˆØ³Ø£ÙƒÙˆÙ† Ø¯Ù„ÙŠÙ„Ùƒ ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„Ø±Ø­Ù„Ø©.`
            );
        } else if (buttonType === 'floating') {
            // For the floating button, a simpler direct contact message
            contactMessage = encodeURIComponent(
                `Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø£Ø­Ù…Ø¯ØŒ Ø£ÙˆØ¯ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ø¨Ø®ØµÙˆØµ Ø§Ù„Ù‚Ø¯Ø±Ø§Øª Ø§Ù„Ø±ÙˆØ­Ø§Ù†ÙŠØ©.`
            );
        }
        
        const whatsappURL = `https://wa.me/${yourPhoneNumber}?text=${contactMessage}`;

        // Check if on a mobile device to try opening the app directly
        const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
        
        if (isMobile) {
            // Try to open WhatsApp app directly
            window.location.href = whatsappURL;
        } else {
            // Fallback for desktop (opens WhatsApp Web)
            window.open(whatsappURL, '_blank');
        }
    }

    function restartTest() {
        playAudio(clickSound);
        currentQuestion = 0;
        answers = {};
        questionsHistory = [];
        document.getElementById("progressBar").style.width = "0%";
        showContainer(setupContainer);
        playAudio(bgMusic);
    }

    document.addEventListener('DOMContentLoaded', () => {
        showContainer(setupContainer);
    });
  </script>
</body>
</html>
